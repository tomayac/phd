var mediaFragments=function(a,b){function c(a){for(var c="img,video",f=a?a.querySelectorAll(c):b.querySelectorAll(c),g=0,h=f.length;h>g;g++){var i=f[g],j=i.src||i.currentSrc,k=/[#&\?]xywh\=(pixel\:|percent\:)?(\d+),(\d+),(\d+),(\d+)/,l=k.exec(j);if(l){var m={mediaItem:i,mediaType:i.nodeName.toLowerCase(),unit:l[1]?l[1]:"pixel:",x:l[2],y:l[3],w:l[4],h:l[5]};"img"===m.mediaType?d(m):e(m)}}}function d(a){var b=a.mediaItem,c=function(){f(a),b.removeEventListener("load",c),b.src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="};b.addEventListener("load",c)}function e(a){a.mediaItem.addEventListener("loadedmetadata",function(){f(a)})}function f(a){var d,e,f,g,c=a.mediaItem;if("pixel:"===a.unit)f=a.w+"px",g=a.h+"px",d="-"+a.x+"px",e="-"+a.y+"px";else{var h=c.width||c.videoWidth,i=c.height||c.videoHeight;f=h*a.w/100+"px",g=i*a.h/100+"px",d="-"+h*a.x/100+"px",e="-"+i*a.y/100+"px"}if("video"===a.mediaType){var j=b.createElement("div");j.style.cssText+="overflow:hidden;width:"+f+";"+"height:"+g+";"+"padding:0;"+"margin:0;"+"border-radius:0;"+"border:none;",c.style.cssText+="transform:translate("+d+","+e+");"+"-webkit-transform:translate("+d+","+e+");",c.parentNode.insertBefore(j,c),j.appendChild(c),c.hasAttribute("autoplay")&&c.play()}else c.style.cssText+="width:"+f+";"+"height:"+g+";"+"background:url("+c.src+") "+"no-repeat "+d+" "+e+";"}return a.addEventListener("DOMContentLoaded",function(){c()}),{apply:function(){c()}}}(window,document);